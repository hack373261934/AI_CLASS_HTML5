var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(a,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(r,s)}l((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,o&&(r=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[0,r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(n){i=[6,n],o=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var a,o,r,s,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},Mediator=function(){function e(e,t,i){void 0===i&&(i=""),this.callBackView="",this.name=e,this.viewComponent=t,this.onEventCenterRegister(),this.onViewRegister(),this.openPanel(),this._viewComponent.center()}return e.prototype.onViewRegister=function(){},e.prototype.onViewRemove=function(){},e.prototype.onEventCenterRegister=function(){},e.prototype.onEventCenterRemove=function(){},e.prototype.openPanel=function(){},e.prototype.removeListener=function(){this.onEventCenterRemove(),this.onViewRemove(),this.viewComponent=null},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewComponent",{get:function(){return this._viewComponent},set:function(e){this._viewComponent=e},enumerable:!0,configurable:!0}),e.prototype.callback=function(){},e}();__reflect(Mediator.prototype,"Mediator");var BaseUI=function(e){function t(t,i,n){void 0===t&&(t=null),void 0===i&&(i=!1),void 0===n&&(n="");var a=e.call(this)||this;return a._isCenter=i,a._opneUi=n,a._onCompleteEvent=t,a.addEventListener(eui.UIEvent.CREATION_COMPLETE,a.createCompleteEvent,a),a}return __extends(t,e),t.prototype.addItem=function(e){var t=this.numChildren;1>t?this.addChildAt(e,t):this.addChildAt(e,t)},t.prototype.createCompleteEvent=function(e){this._onCompleteEvent&&EventCenter.dispatchEvent(new GameEvent(this._onCompleteEvent.event,this._onCompleteEvent.par))},t.prototype.center=function(){this._isCenter&&(this.x=(AppConfig.stageWidth-this.width)/2,this.y=(AppConfig.stageHeight-this.height)/2)},t.prototype.show=function(){this.visible=!0},t.prototype.hide=function(){this.visible=!1},t.prototype.dispose=function(){},t}(eui.Component);__reflect(BaseUI.prototype,"BaseUI");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.loadResource()];case 1:return i.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=i.sent(),this.startAnimation(e),[4,platform.login()];case 3:return i.sent(),[4,platform.getUserInfo()];case 4:return t=i.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return i.sent(),[4,this.loadTheme()];case 2:return i.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return i.sent(),this.stage.removeChild(e),[3,5];case 4:return t=i.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){AppFacade.getInstance().startUp();alert("前"),getEnvVal(function(e){alert(e)}),this.addChild(MainUIView.getInstance()),MainUIView.getInstance().showView(new ui.MainView,ui.MainViewMediator.NAME,!0)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,i=RES.getRes(e);return t.texture=i,t},t.prototype.startAnimation=function(e){var t=this,i=new egret.HtmlTextParser,n=e.map(function(e){return i.parse(e)}),a=this.textfield,o=-1,r=function(){o++,o>=n.length&&(o=0);var e=n[o];a.textFlow=e;var i=egret.Tween.get(a);i.to({alpha:1},200),i.wait(2e3),i.to({alpha:0},200),i.call(r,t)};r()},t}(eui.UILayer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function a(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}var r=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.split("/");s.pop();var l=s.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(n,generateJSON.paths[e])},this):RES.getResByUrl(l,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){t.call(n,generateJSON.paths[e])},r)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AppConfig=function(){function e(){}return e.init=function(e){this.stageWidth=e.stageWidth,this.stageHeight=e.stageHeight},e}();__reflect(AppConfig.prototype,"AppConfig");var GloableData=function(){function e(){}return e.deviceType="",e.isDebug=!0,e.quizsData=null,e.classMax=0,e.M_X=[846.1800000000001,843.1800000000001,839.1800000000001,838.1800000000001,836.1800000000001,835.1800000000001,835.1800000000001,838.1800000000001,843.1800000000001,852.1800000000001,861.1800000000001,875.1800000000001,882.1800000000001,889.1800000000001,907.1800000000001,914.1800000000001,920.1800000000001,921.1800000000001,921.1800000000001,907.1800000000001,870.1800000000001,838.1800000000001,828.1800000000001,826.1800000000001,825.1800000000001,824.1800000000001,823.1800000000001],e.M_Y=[389,389,394,397,403,409,417,433,446,456,464,466,465,462,448,442,437,430,425,410,391,387,387,388,388,389,389],e.M_C=[!1,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],e}();__reflect(GloableData.prototype,"GloableData");var EventData;!function(e){var t;!function(e){e[e.start=20001]="start",e[e.next=20002]="next",e[e.prev=20003]="prev",e[e.point=20004]="point"}(t=e.eventID||(e.eventID={}))}(EventData||(EventData={}));var common;!function(e){var t=function(){function e(){}return e.getBitmap=function(e){return new egret.Bitmap(RES.getRes(e))},e}();e.Utils=t,__reflect(t.prototype,"common.Utils")}(common||(common={}));var EventCenter=function(){function e(){}return e.addEventListener=function(e,t,i,n,a){this.instance.addEventListener(e,t,i,n,a)},e.dispatchEvent=function(e){this.instance.dispatchEvent(e)},e.hasEventListener=function(e){return this.instance.hasEventListener(e)},e.removeEventListener=function(e,t,i,n){this.instance.removeEventListener(e,t,i,n)},e.instance=new egret.EventDispatcher,e}();__reflect(EventCenter.prototype,"EventCenter");var GameEvent=function(e){function t(t,i,n,a){var o=e.call(this,t,n,a)||this;return o.parameter=i,o}return __extends(t,e),t}(egret.Event);__reflect(GameEvent.prototype,"GameEvent");var GameEventConstant=function(){function e(){}return e.TIME_EVENT="TIME_EVENT",e}();__reflect(GameEventConstant.prototype,"GameEventConstant");var AppFacade=function(){function e(){this.mediatorDictionary=new Dictionary,this.proxyDictionary=new Dictionary}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.registerMediator=function(e){this.mediatorDictionary[e.name]=e},e.prototype.registerProxy=function(e){this.proxyDictionary[e.name]=e},e.prototype.getProxyByName=function(e){return this.proxyDictionary[e]},e.prototype.getMediatorByName=function(e){return this.mediatorDictionary[e]},e.prototype.delMediatorByName=function(e){var t=this.mediatorDictionary[e];t&&t.removeListener(),this.mediatorDictionary[e]=null,delete this.mediatorDictionary[e]},e.prototype.startUp=function(){ProxyManager.start()},e}();__reflect(AppFacade.prototype,"AppFacade");var Proxy=function(){function e(e){this.name=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),e}();__reflect(Proxy.prototype,"Proxy");var ProxyManager=function(){function e(){}return e.start=function(){},e}();__reflect(ProxyManager.prototype,"ProxyManager");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var Dictionary=function(){function e(){this._keys=[],this._values=[]}return e.prototype.add=function(e,t){this[e]=t;var i=this._keys.indexOf(e);-1===i?(this._keys.push(e),this._values.push(t)):(this._keys[i]=e,this._values[i]=t)},e.prototype.remove=function(e){console.debug(JSON.stringify(this._keys));var t=this._keys.indexOf(e,0);this._keys.splice(t,1),this._values.splice(t,1),delete this[e]},e.prototype.clean=function(){var e,t=this._keys.length;for(e=0;t>e;e++){var i=this._keys[e];delete this[i]}this._keys=[],this._values=[]},e.prototype.keys=function(){return this._keys},e.prototype.values=function(){return this._values},e.prototype.containsKey=function(e){return"undefined"==typeof this[e]?!1:!0},e.prototype.toLookup=function(){return this},e.prototype.getValue=function(e){return this[e]},e}();__reflect(Dictionary.prototype,"Dictionary",["interfaces.IDictionary"]);var utils;!function(e){function t(e,t){var i=new egret.DisplayObjectContainer,n=new egret.Bitmap;n.texture=RES.getRes(e);var a=new egret.Bitmap;return a.texture=RES.getRes(t),i.addChild(a),i.addChild(n),n.x=(a.width-n.width)/2,n.y=(a.height-n.height)/2,i}e.picLayoutCenter=t}(utils||(utils={}));var SoundManager=function(){function e(){}return e.playBgSound=function(e,t,i){if(void 0===e&&(e=!0),void 0===t&&(t="gamemusic_mp3"),void 0===i&&(i=0),this.BG_SOUND_OPEN=!0,egret.localStorage.setItem("sound",this.BG_SOUND_OPEN.toString()),e)this.playEffect(!0);else{var n=RES.getRes(t);this.sdbg_channel=n.play(0,i),this.sdbg_channel.addEventListener(egret.Event.SOUND_COMPLETE,function(e){console.log("背景播放完毕")},this)}},e.stopBgSound=function(e){void 0===e&&(e=!0),this.BG_SOUND_OPEN&&(this.BG_SOUND_OPEN=!1,egret.localStorage.setItem("sound",this.BG_SOUND_OPEN.toString()),e?this.effect_channel.stop():this.sdbg_channel.stop())},e.playEffect=function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t="effect_mp3"),void 0===i&&(i=0),this.BG_SOUND_OPEN){e||this.sdbg_channel.stop();var n=RES.getRes(t);this.effect_channel=n.play(0,i),this.effect_channel.addEventListener(egret.Event.SOUND_COMPLETE,function(e){console.log("音效播放完毕")},this)}},e.stopEffectSound=function(){this.BG_SOUND_OPEN&&(this.effect_channel.stop(),this.playBgSound(!1))},e.BG_SOUND_OPEN=!0,e.EFF_SOUND_OPEN=!0,e}();__reflect(SoundManager.prototype,"SoundManager");var utils;!function(e){var t=function(){function e(){}return e.getBitmap=function(e){return new egret.Bitmap(RES.getRes(e))},e.showNum=function(e,t,i,n){if(void 0===n&&(n=!0),n)for(;e.numChildren;)e.removeChildAt(0);if(!(0>t)){var a=t.toString(),o=a.split(".");a=o[0];for(var r,s=0,l=0;l<a.length;l++)r=new eui.Image,r.source=RES.getRes(name),r.x=s,e.addChild(r),s+=r.width}},e.getTime=function(e,t){void 0===t&&(t=1);var i,n=Math.floor(e/1e3),a=Math.floor(n%60),o=Math.floor(n/60);o=o>=60?Math.floor(o%60):o;var r=Math.floor(n/3600);if(r>24&&4==t)return Math.floor(r/24)+"天";switch(t){case 1:i=this.addPlace(o)+":"+this.addPlace(a);break;case 2:i=this.addPlace(r)+":"+this.addPlace(o)+":"+this.addPlace(a);break;case 3:i=n.toString()}return i},e.addPlace=function(e,t,i,n){void 0===t&&(t="0"),void 0===i&&(i=2),void 0===n&&(n=!0);for(var a="",o=i-e.toString().length,r=0;o>r;r++)a+=t;return n?a+e:e+a},e}();e.UIUtils=t,__reflect(t.prototype,"utils.UIUtils")}(utils||(utils={}));var utils;!function(e){function t(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n,a=!0,o=0,r=t.length;r>o;o++)if(n=t[o],void 0===e[n]){a=!1;break}return a}function i(e,t,i,n){n||(n=i);var a,o,r=Math.min(i.length,n.length);for(a=0;r>a;a++)switch(o=t[n[a]],typeof o){case"string":case"number":case"boolean":e[i[a]]=o;break;case"object":if(o.slice)e[i[a]]=o.slice();else{var s,l={};for(s in o)l[s]=o[s];e[i[a]]=l}}}function n(e,t,n){var o;return o=n.map(function(e){return a(e)}),i(e,t,n,o)}function a(e){if(!e||0===e.length)return"";var t=e.charCodeAt(0);return t>=97&&122>=t?(t-=32,String.fromCharCode(t)+e.substring(1)):e}function o(e,t){if(t.x==e.x)return t.y>e.y?.5*Math.PI:1.5*Math.PI;if(t.y==e.y)return t.x>e.x?0:Math.PI;var i=Math.atan((e.y-t.y)/(e.x-t.x));return t.x<e.x&&t.x>e.x?i+Math.PI:t.x<e.x&&t.x<e.x?i+Math.PI:t.x>e.x&&t.x<e.x?i+2*Math.PI:i}function r(e,t){var i;return i=e.x==t.x?e.y!=t.y?Math.abs(e.y-t.y):0:e.y==t.y?e.x!=t.x?Math.abs(e.x-t.x):0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function s(e){if(e)for(;e.numChildren>0;)e.removeChildAt(0)}function l(e,t,i){void 0===i&&(i=!1);var n=RES.getRes(e+"_json"),a=null;return n&&(a=n[t]),a}function h(e,t,i,n){void 0===n&&(n=!1);var a,o,r=RES.getRes(e+"_json");if(r)if(o=[],r instanceof Array)for(var s=0,l=r.length;l>s;s++)a=r[s],a[t]===i&&o.push(a.Id);else for(var h in r)a=r[h],a[t]===i&&o.push(a.Id);return o}e.hasProperties=t,e.copyProperties=i,e.copyPropertiesFromStaticData=n,e.initialUpper=a,e.pointToAngle=o,e.getPointDistance=r,e.removeChildren=s,e.getStaticDataByNameAndId=l,e.getStaticIdsByNameAndParentId=h}(utils||(utils={}));var MainUIView=function(e){function t(){var t=e.call(this)||this;return t.winMap=new Dictionary,t.currentShowView=[],t.uiLayer=new egret.DisplayObjectContainer,t.addChild(t.uiLayer),t.otherLayer=new egret.DisplayObjectContainer,t.addChild(t.otherLayer),t.mainLayer=new egret.DisplayObjectContainer,t.addChild(t.mainLayer),t}return __extends(t,e),t.prototype.addItem=function(e){this.uiLayer.addChild(e)},t.prototype.addViewToOtherLayer=function(e){this.otherLayer.addChild(e)},t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.showView=function(e,t,i){void 0===i&&(i=!1),this.winMap.containsKey(t)||(this.winMap.add(t,e),this.uiLayer.addChild(e),i?e.show():e.hide())},t.prototype.showViewByMediatorName=function(e){if(this.winMap.containsKey(e)){var t=this.winMap.getValue(e);t.show()}},t.prototype.closeAllView=function(){var e,t=this.currentShowView.length;for(e=0;t>e;e++){var i=this.currentShowView[e];this.closeView(i),e--,t=this.currentShowView.length}},t.prototype.getViewIsShow=function(e){var t=this.winMap.getValue(e);return t?t.visible:!1},t.prototype.hideView=function(e){var t=this.winMap.getValue(e);t&&t.hide()},t.prototype.closeView=function(e){var t=this.currentShowView.indexOf(e);if(-1!==t&&this.currentShowView.splice(t,1),this.winMap.containsKey(e)){var i=this.winMap.getValue(e);i.hide(),AppFacade.getInstance().delMediatorByName(e),this.winMap.remove(e),i.parent&&i.parent.removeChild(i),i.dispose(),i=null}},t}(egret.DisplayObjectContainer);__reflect(MainUIView.prototype,"MainUIView");var MovieClip=function(e){function t(t,i,n,a,o,r){var s=e.call(this)||this;return s.onAddToStage(t,i,n,a,o,r),s}return __extends(t,e),t.prototype.onAddToStage=function(e,t,i,n,a,o){var r=RES.getRes(e),t=RES.getRes(t);this._MovieClipDataFactory=new egret.MovieClipDataFactory(r,t),this._MovieClip=new egret.MovieClip(this._MovieClipDataFactory.generateMovieClipData(i)),this._MovieClip.addEventListener(egret.Event.COMPLETE,this.movieClipComplete,this),this._MovieClip.play(n),this._MovieClip.x=a,this._MovieClip.y=o,this.addChild(this._MovieClip)},t.prototype.movieClipComplete=function(){console.log("MovieClip播放完成！")},t}(egret.DisplayObjectContainer);__reflect(MovieClip.prototype,"MovieClip");var Pencil=function(e){function t(t,i,n,a,o){var r=e.call(this)||this;return r.B_Color=t,r.B_thickness=i,r.M_ClickX=n,r.M_ClickY=a,r.M_ClickDrag=o,console.log("--======"+r.M_ClickX),r.onAddToStage(),r}return __extends(t,e),t.prototype.onAddToStage=function(){if(this.M_Shap=new egret.Shape,this.M_Shap.graphics.beginFill(16777215,0),this.M_Shap.graphics.drawRect(0,0,1115,670),this.M_Shap.graphics.endFill(),this.M_Shap.cacheAsBitmap=!0,this.M_Shap.touchEnabled=!0,this.addChild(this.M_Shap),"Pc"==GloableData.deviceType)console.log("\b老师端画笔"),this.M_ClickX=new Array,this.M_ClickY=new Array,this.M_ClickDrag=new Array,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMoved,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnded,this);else if(0!=this.M_ClickX.length||0!=this.M_ClickY.length||0!=this.M_ClickDrag.length){console.log("有数据"),this.M_Shap.graphics.lineStyle(this.B_thickness,this.B_Color,1,!0,"","","round");for(var e=0;e<this.M_ClickX.length;e++)this.M_ClickDrag[e]&&e?this.M_Shap.graphics.moveTo(this.M_ClickX[e-1],this.M_ClickY[e-1]):this.M_Shap.graphics.moveTo(this.M_ClickX[e],this.M_ClickY[e]),this.M_Shap.graphics.lineTo(this.M_ClickX[e],this.M_ClickY[e]);this.M_Shap.graphics.endFill()}},t.prototype.addTouchPoint=function(e,t,i){void 0===i&&(i=!1),(e>0||e<this.stage.x+this.stage.width)&&this.M_ClickX.push(e),(t>0||t<this.stage.y+this.stage.height)&&this.M_ClickY.push(t),this.M_ClickDrag.push(i)},t.prototype.redraw=function(e,t){this.M_Shap.graphics.lineStyle(t,e,1,!0,"","","round");for(var i=0;i<this.M_ClickX.length;i++)this.M_ClickDrag[i]&&i?this.M_Shap.graphics.moveTo(this.M_ClickX[i-1],this.M_ClickY[i-1]):this.M_Shap.graphics.moveTo(this.M_ClickX[i],this.M_ClickY[i]),this.M_Shap.graphics.lineTo(this.M_ClickX[i],this.M_ClickY[i]);this.M_Shap.graphics.endFill()},t.prototype.onTouchBegin=function(e){console.log("touch begins"),this.B_Paint=!0,this.addTouchPoint(e.localX,e.localY),console.log("localX:"+e.localX,"---localY:"+e.localY),this.redraw(this.B_Color,this.B_thickness)},t.prototype.onTouchMoved=function(e){console.log("touch moved"),this.B_Paint&&(this.addTouchPoint(e.localX,e.localY,!0),console.log("localX:"+e.localX,"---localY:"+e.localY),this.redraw(this.B_Color,this.B_thickness))},t.prototype.onTouchEnded=function(e){console.log("touch ends"),console.log("M_ClickX:"+this.M_ClickX,"---M_ClickY:"+this.M_ClickY,"---M_ClickDrag:"+this.M_ClickDrag);var t='{"type":'+EventData.eventID.point+', "quizId":'+GloableData.quizsData.data.quizs[GloableData.classMax].quizId+',"quizItemId":222,"lessonLid":100001,"data":{"eventData":{"pointX":['+this.M_ClickX+'],"pointY":['+this.M_ClickY+'],"pointDrag":['+this.M_ClickDrag+'],"pointColor":'+this.B_Color+',"pointThickness":'+this.B_thickness+"}}}";dispathchEventToStage(t),this.M_ClickX=[],this.M_ClickY=[],this.M_ClickDrag=[],this.B_Paint=!1},t}(egret.DisplayObjectContainer);__reflect(Pencil.prototype,"Pencil");var ui;!function(e){var t=function(e){function t(t,i,n){var a=e.call(this)||this;return a.nowHeight=0,a.nowWidth=0,a.widthN=0,a.heightN=0,a.items=[],a.buttonTF=[],a.layoutType=t,a.widthN=i,a.heightN=n,a}return __extends(t,e),t.prototype.addItem=function(e,t){1==this.layoutType?(e.y=0,e.x=this.nowWidth,this.nowWidth+=e.width+this.widthN):(e.x=0,e.y=this.nowHeight,this.nowHeight+=e.height+this.heightN),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this._selectItem,this),this.addChild(e),0==t?this.items.push(e):this.buttonTF.push(e)},t.prototype.addItems=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0);var n,a;for(n=0,a=e.length;a>n;n++)this.addItem(e[n],t);0==t&&e[i].dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP))},t.prototype.selectItem=function(e){var t=this.items[e];return t.dispatchEvent(new egret.TouchEvent(egret.TouchEvent.TOUCH_TAP)),t},t.prototype.itemRepPos=function(e){this.addChild(this.items[e])},t.prototype._selectItem=function(e){void 0===e&&(e=null);var t,i,n;for(t=0,i=this.items.length;i>t;t++){var a=this.items[t],o=a;e.currentTarget===a?(o.enabled&&(o.currentState="down",this.setChildIndex(a,this.items.length-1)),n=t):o.enabled&&(this.setChildIndex(a,t),o.currentState="up")}for(t=0,i=this.buttonTF.length;i>t;t++){var a=this.buttonTF[t];t==n?a.currentState="down":a.currentState="up"}},t.prototype.dispose=function(){this.removeChildren(),this.parent&&this.parent.removeChild(this)},t}(eui.Group);e.BaseTabBar=t,__reflect(t.prototype,"ui.BaseTabBar")}(ui||(ui={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=1476,this.textField.height=750,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var ui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.imgURL="",e.StartTime=15519453e5,e.NowTime=1551945203e3,e.hour="",e.min="",e.sec="",e}return __extends(i,t),i.prototype.createCompleteEvent=function(i){switch(t.prototype.createCompleteEvent.call(this,i),console.log(GloableData.deviceType),GloableData.deviceType){case"Pc":this.stage.setContentSize(1440,1080),alert(GloableData.deviceType+"--加载老师端皮肤"),this.skinName="resource/game_skins/TeaViewSkin.exml";break;case"Pad":this.stage.setContentSize(1440,812),alert(GloableData.deviceType+"--加载学生端Pad版皮肤"),this.skinName="resource/game_skins/PadViewSkin.exml",this.BtnStart.visible=!1,this.TimerLable.y=340;break;default:alert(GloableData.deviceType+"--加载学生端Mobile版皮肤"),this.skinName="resource/game_skins/StuViewSkin.exml",this.BtnStart.visible=!1,this.TimerLable.y=470}this.timeFun(),this.timer=new egret.Timer(1e3,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this),this.timer.start();var n=new egret.URLLoader,a=new egret.URLRequest,n=new egret.URLLoader,a=new egret.URLRequest;a.url="resource/assets/classData.json",n.load(a),n.addEventListener(egret.Event.COMPLETE,this.init,this),AppFacade.getInstance().registerMediator(new e.MainViewMediator(this))},i.prototype.init=function(e){var t=this,i=e.target.data;GloableData.quizsData=JSON.parse(i),this._zhuanshi=new MovieClip("testmc_json","testmc_png","bai",-1,0,0),this.AniGroup.addChild(this._zhuanshi),"Pc"!=GloableData.deviceType&&(egret.ImageLoader.crossOrigin="anonymous",RES.getResByUrl(GloableData.quizsData.data.quizs[GloableData.classMax].quizBgImages[GloableData.classMax].mediaUrl,function(e){console.log(e),t.classBG.source=e,t.GroupBox.addChild(t.classBG)},this,RES.ResourceItem.TYPE_IMAGE)),egret.ImageLoader.crossOrigin="anonymous",RES.getResByUrl(GloableData.quizsData.data.quizs[GloableData.classMax].quizItems[GloableData.classMax].mediaUrl,function(e){console.log(e);var i=new eui.Image;i.source=e,t.GroupBox.addChild(i)},this,RES.ResourceItem.TYPE_IMAGE)},i.prototype.timerFunc=function(){this.timeFun()},i.prototype.timerComFunc=function(){this.timer.stop()},i.prototype.timeFun=function(){var e=this.StartTime;this.NowTime+=1e3;var t=e-this.NowTime;if(t>0){var i=Math.floor(t/1e3/60/60%24),n=Math.floor(t/1e3/60%60),a=Math.floor(t/1e3%60);10>i?this.hour="0"+i:this.hour=""+i,10>n?this.min="0"+n:this.min=""+n,10>a?0===a?this.sec="6"+a:this.sec="0"+a:this.sec=""+a;var o=this.min+":"+this.sec;this.TimerLable.text=o}},i}(BaseUI);e.MainView=t,__reflect(t.prototype,"ui.MainView")}(ui||(ui={}));var MainViewHandle=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.setHandle=function(e,t){this.getHandle(e,t)},t.prototype.getHandle=function(e,t){var t=JSON.parse(t);switch(console.log(t),t.type){case 20001:console.log("MainViewHandle正常"),e.timer.stop(),e.removeChild(e.AniGroup);break;case 20002:GloableData.classMax!=GloableData.quizsData.data.quizs.length-1&&(e.GroupBox.removeChildren(),GloableData.classMax+=1,e.BtnPrev.enabled=!0,GloableData.classMax===GloableData.quizsData.data.quizs.length-1&&(e.BtnNext.enabled=!1),RES.getResByUrl(GloableData.quizsData.data.quizs[GloableData.classMax].quizBgImages[0].mediaUrl,function(t){console.log(t);var i=new eui.Image;i.source=t,e.GroupBox.addChild(i),i.x=e.stage.stageWidth/2-i.width/2,i.y=0},this,RES.ResourceItem.TYPE_IMAGE));break;case 20003:0!=e.classMax&&(e.GroupBox.removeChildren(),e.classMax-=1,e.BtnNext.enabled=!0,0===e.classMax&&(e.BtnPrev.enabled=!1),RES.getResByUrl(e.testDate.data.quizs[e.classMax].quizBgImages[0].mediaUrl,function(t){console.log(t);var i=new eui.Image;i.source=t,e.GroupBox.addChild(i),i.x=e.stage.stageWidth/2-i.width/2,i.y=0},this,RES.ResourceItem.TYPE_IMAGE));break;case 20004:var i=new Pencil(t.data.eventData.pointColor,t.data.eventData.pointThickness,t.data.eventData.pointX,t.data.eventData.pointY,t.data.eventData.pointDrag);e.PenGroup.addChild(i);break;default:return}},t}(egret.DisplayObjectContainer);__reflect(MainViewHandle.prototype,"MainViewHandle");var ui;!function(e){var t=function(e){function t(i){return e.call(this,t.NAME,i)||this}return __extends(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this.viewComponent},enumerable:!0,configurable:!0}),t.prototype.onViewRegister=function(){this.view.stage.addEventListener("onReceiveEvent",this.handleEvent,this),this.view.BtnLiang.addEventListener(egret.TouchEvent.TOUCH_TAP,this.testLiang,this),this.view.BtnPrev.addEventListener(egret.TouchEvent.TOUCH_TAP,this.prevClass,this),this.view.BtnNext.addEventListener(egret.TouchEvent.TOUCH_TAP,this.nextClass,this),this.view.BtnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startClass,this),this.view.BtnAni.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startAni,this),this.view.pan_01.addEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this),this.view.pan_02.addEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this),this.view.pan_03.addEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this),this.view.BtnClearPan.addEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this)},t.prototype.onViewRemove=function(){this.view.BtnPrev.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.prevClass,this),this.view.BtnNext.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.nextClass,this),this.view.BtnStart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startClass,this),this.view.BtnAni.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startAni,this),this.view.pan_01.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this),this.view.pan_02.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this),this.view.pan_03.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this),this.view.BtnClearPan.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.initPan,this)},t.prototype.onEventCenterRegister=function(){},t.prototype.onEventCenterRemove=function(){},t.prototype.testLiang=function(){},t.prototype.handleEvent=function(e){MainViewHandle.getInstance().setHandle(this.view,e.data)},t.prototype.initPan=function(e){switch(this.view.BtnClearPan.enabled=!0,e.currentTarget){case this.view.pan_01:console.log("选择了“红色”画笔");var t=new Pencil(16711680,10,[],[],[]);this.view.PenGroup.visible=!0,this.view.PenGroup.addChild(t);break;case this.view.pan_02:console.log("选择了“黄色”画笔");var t=new Pencil(16776960,10,[],[],[]);this.view.PenGroup.visible=!0,this.view.PenGroup.addChild(t);break;case this.view.pan_03:console.log("选择了“蓝色”画笔");var t=new Pencil(255,10,[],[],[]);this.view.PenGroup.visible=!0,this.view.PenGroup.addChild(t);break;default:console.log("清除画笔"),this.view.PenGroup.removeChildren(),this.view.PenGroup.visible=!1,this.view.BtnClearPan.enabled=!1}},t.prototype.startAni=function(){var e=new egret.Sound,t="resource/assets/1.wav";e.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),e.load(t)},t.prototype.onLoadComplete=function(e){var t=e.target,i=t.play(0,1);this._fish=new MovieClip("fish_jinyugongzhu_json","fish_jinyugongzhu_png","fish_jinyugongzhu_idle",-1,600,200),this.view.AniGroup.addChild(this._fish),i.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)},t.prototype.onSoundComplete=function(e){egret.log("onSoundComplete"),this._fish.gotoAndStop()},t.prototype.startClass=function(){console.log(EventData.eventID.start);var e='{"type":'+EventData.eventID.start+', "quizId":'+GloableData.quizsData.data.quizs[GloableData.classMax].quizId+',"quizItemId":222,"lessonLid":100001,"data":{"eventData":{"pointX":[],"pointY":[]}}}';dispathchEventToStage(e),this.view.timer.stop(),this.view.removeChild(this.view.DialogGroup)},t.prototype.prevClass=function(){var e=this;console.log("上一题"),0!=GloableData.classMax&&(this.view.GroupBox.removeChildren(),GloableData.classMax-=1,this.view.BtnNext.enabled=!0,0===GloableData.classMax&&(this.view.BtnPrev.enabled=!1),RES.getResByUrl(GloableData.quizsData.data.quizs[GloableData.classMax].quizBgImages[0].mediaUrl,function(t){console.log(t);var i=new eui.Image;i.source=t,e.view.GroupBox.addChild(i),i.x=e.view.stage.stageWidth/2-i.width/2,i.y=0},this,RES.ResourceItem.TYPE_IMAGE));var t='{"type":'+EventData.eventID.prev+', "quizId":'+GloableData.quizsData.data.quizs[GloableData.classMax].quizId+',"quizItemId":222,"lessonLid":100001,"data":{"eventData":{"pointX":[],"pointY":[]}}}';dispathchEventToStage(t)},t.prototype.nextClass=function(){var e=this;console.log("下一题"),this.view.PenGroup.removeChildren(),this.view.PenGroup.visible=!1,this.view.BtnClearPan.enabled=!1,GloableData.classMax!=GloableData.quizsData.data.quizs.length-1&&(this.view.GroupBox.removeChildren(),GloableData.classMax+=1,this.view.BtnPrev.enabled=!0,GloableData.classMax===GloableData.quizsData.data.quizs.length-1&&(this.view.BtnNext.enabled=!1),RES.getResByUrl(GloableData.quizsData.data.quizs[GloableData.classMax].quizBgImages[0].mediaUrl,function(t){console.log(t);
var i=new eui.Image;i.source=t,e.view.GroupBox.addChild(i),i.x=e.view.stage.stageWidth/2-i.width/2,i.y=0},this,RES.ResourceItem.TYPE_IMAGE));var t='{"type":'+EventData.eventID.next+', "quizId":'+GloableData.quizsData.data.quizs[GloableData.classMax].quizId+',"quizItemId":222,"lessonLid":100001,"data":{"eventData":{"pointX":[],"pointY":[]}}}';dispathchEventToStage(t)},t.NAME="MainViewMediator",t}(Mediator);e.MainViewMediator=t,__reflect(t.prototype,"ui.MainViewMediator")}(ui||(ui={}));